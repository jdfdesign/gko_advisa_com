function init_theme_preview(){iframe=document.getElementById("preview"),idocument=iframe.contentWindow.document||iframe.contentDocument;var e=[],t,n=document.URL.split("?")[1];if(n!=undefined){n=n.split("&");for(var r=0;r<n.length;r++)t=n[r].split("="),e.push(t[1]),e[t[0]]=t[1]}e["theme"]!=undefined&&$("#preview").contents().find("a[href]").attr("href",function(t,n){var r=replaceOrAddParam(n,/theme=[^&^$]+/i,"theme="+e.theme);return console.log(r),r})}function replaceOrAddParam(e,t,n){return e.match(t)?e.replace(t,n):e.indexOf("?")!=-1?e+"&"+n:e+"?"+n}function fix_height(){var e=$("#tray").height();$("#preview").css("height",$(window).height()-e+"px")}var iframe,idocument;$(document).ready(function(){$(window).resize(function(){fix_height()}).resize(),$("#themes-list").change(function(){var e=$(this).val();window.location.href=replaceOrAddParam(document.URL,/theme=[^&^$]+/i,"theme="+e)})});